# VideoWall Hand-off (2025-11-23, v0.4.1) â€?ç‰ˆæœ¬å·ï¼š0.4.0

## é¡¹ç›®ç»“æ„
- `controller/` Node.js æ§åˆ¶ç«¯ï¼ˆExpress + WebSocketï¼Œé™æ€æ§åˆ¶å°åœ?`public/`ï¼Œåª’ä½?èŠ‚ç›®å­˜å‚¨åœ?`data/`ï¼‰ã€?- `android-client/` Kotlin + ExoPlayer å®¢æˆ·ç«¯ï¼Œflavor: `left|center|right`ã€?- `notes/` è®°å½•ä¸Šä¸‹æ–‡ä¸å†³ç­–ã€?
## å¿«é€Ÿè¿è¡?- æ§åˆ¶ç«¯æœ¬æœºï¼š
  ```bash
  cd controller
  npm install
  npm start  # http://<IP>:8088 ï¼ŒWS: ws://<IP>:8088/ws
  ```
- Dockerï¼ˆç¾¤æ™?NASï¼‰ï¼š
  ```bash
  cd controller
  npm install --production
  docker compose up -d --build
  ```

## äº®ç‚¹ï¼ˆv0.4.0ï¼?- **å¯è§†åŒ–è£åˆ?+ ç¼éš™è¡¥å¿**ï¼šä¸Šä¼ é¡µå¯è¾“å…?Gap1/Gap2ï¼Œå®æ—¶å¯è§†åŒ–äº”æ®µï¼ˆå·¦å±?| ç¼? | ä¸­å± | ç¼? | å³å±ï¼‰ï¼ŒFFmpeg æŒ‰ç¼©æ”¾åä½ç½®è£åˆ‡å¹¶å‹ç¼©ç¼éš™ï¼Œé€‚é…æœ‰è¾¹æ¡†çš„å®ä½“æ‹¼ç¼ã€?- **å®¢æˆ·ç«¯ä¸»æœ?ä»æœºåŒæ­¥**ï¼šé»˜è®¤ä¸­å±ä¸ºä¸»æœºï¼Œå¼€å¯æœ¬åœ?WS(47999) å¯¹æ—¶å¹¶ä¸‹å?prepare/start/syncï¼›å·¦å³å±ä»…éœ€è¿ä¸»æœºå³å¯åŒæ­¥æ’­æ”¾ï¼Œè„±ç¦»æ§åˆ¶ç«¯æ—¶é’Ÿã€?- **ç¼“å­˜ + å¼€æœºè‡ªæ’?*ï¼šèŠ‚ç›®ä¸‹è½½åç¼“å­˜å¹¶æŒä¹…åŒ–ï¼›ä¸»æœºé‡å¯ä¼šè¯»å–ä¸Šæ¬¡èŠ‚ç›®å¹¶è‡ªåŠ¨åè°ƒæ’­æ”¾ã€‚è¿è¡Œä¸­æ¯?2s æ¼‚ç§»æ£€æµ‹ï¼Œ>150ms ç›´æ¥ seekï¼?0~150ms å¾®è°ƒå€é€Ÿã€?- **APK è¾“å‡º**ï¼š`android-client/app/build/outputs/apk/<role>/release/videowall-<role>-release-v0.4.1-*.apk`ã€?
## æ§åˆ¶å°ä½¿ç”?- è®¿é—® `http://<IP>:8088`ã€?- â€œä¸Šä¼?å‘å¸ƒâ€é¡µï¼šé€‰æ‹©é€‚é…æ¨¡å¼ã€å¡«å†™ç¼éš?Gap1/Gap2ï¼ˆåƒç´ ï¼‰ï¼ŒæŸ¥çœ‹å¯è§†åŒ–ç¤ºæ„åä¸Šä¼ ï¼›ç”ŸæˆèŠ‚ç›®å¯ä¸€é”®å‘å¸ƒï¼Œé¢„è§ˆä¸ºâ€œå·¦ç«?ä¸­æ¨ª-å³ç«–â€ã€?- æ‰‹åŠ¨å¹¿æ’­ã€èŠ‚ç›®åˆ—è¡¨ã€æ’ç¨‹ã€ç”µæºæ§åˆ¶å‡æœ‰ç‹¬ç«‹é¡µé¢ï¼Œå¯¼èˆªåˆ‡æ¢ã€?
## Smoke æµ‹è¯•
1. `curl http://localhost:8088/api/ping` ç¡®è®¤æ§åˆ¶ç«¯å­˜æ´»ã€?2. ä¸Šä¼  6000x1920 ç´ æï¼ˆå« Gap1/Gap2ï¼‰ï¼Œæ£€æŸ¥é¢„è§ˆä¸ç”ŸæˆèŠ‚ç›®ã€?3. å‘å¸ƒèŠ‚ç›®ï¼Œä¸‰ç«¯ï¼ˆ1 ä¸?+ 2 ä»ï¼‰åº”åœ¨ 5s å†…åŒæ­¥æ’­æ”¾ï¼Œåç§» <50msã€?4. æ–­ç½‘é‡å¯ä»…ä¿ç•™å®¢æˆ·ç«¯ï¼šä¸»æœºåº”è‡ªåŠ¨è¯»ç¼“å­˜å¹¶åè°ƒæ’­æ”¾ï¼ˆå·¦å³å±éœ€èƒ½è®¿é—®ç¼“å­˜æˆ–å?URLï¼‰ã€?
## å·²çŸ¥é™åˆ¶
- æœªåŠ é‰´æƒ/HTTPSï¼ˆå»ºè®®åä»£ï¼‰ã€?- FFmpeg å¿…é¡»å¯æ‰§è¡Œï¼›è½¬ç å¤±è´¥ä»…è¿”å›?500ã€?- ExoPlayer ä»æœ‰å¼ƒç”¨è­¦å‘Šï¼›æœªåšæ–­ç‚¹ç»­ä¼?å¤šé‡é‡è¯•ã€?- ä¸»æœºå‡è®¾å·¦å³å±èƒ½è®¿é—®ç´ æ URL æˆ–å·²æœ‰ç¼“å­˜ï¼›çº¯ç¦»çº¿éœ€é¢„è£…ä¸‰è·¯æ–‡ä»¶ã€?
## é…ç½®
- æ§åˆ¶ç«¯ï¼š`PORT`ã€`HOST`ã€`PUBLIC_URL`ã€?  - ç¼“å­˜/èŠ‚ç›®ç›®å½•ï¼š`controller/data/`
- å®¢æˆ·ç«¯ï¼š`app/build.gradle` ä¸?`WS_URL`ï¼ˆæ§åˆ¶ç«¯åœ°å€ï¼‰ï¼›ä»æœºçš„ä¸»æœ?WS è‹¥æœªè®¾ç½®ï¼Œä¼šä»¥æ§åˆ¶ç«¯ IP æ¨æ–­ 47999 ç«¯å£ï¼Œå¯åœ?App å†…æ‰‹åŠ¨ä¿®æ”¹åä¿å­˜ã€?
## æ‰“åŒ…
- æ§åˆ¶ç«?Dockerï¼š`cd controller && npm install --production && docker compose up -d --build`
- Androidï¼š`cd android-client && ./gradlew assembleLeftRelease assembleCenterRelease assembleRightRelease`

